<!-- SPDX-License-Identifier: LicenseRef-CityLegends-Proprietary-Docs -->

# SITE_LOGIC — логіка сайту (City Legends)

Цей документ описує **функціональну логіку** та **UI-вимоги** для:
- вікон авторизації (вхідне вікно, Увійти, Зареєструватися, Відновлення пароля);
- екрана **Лобі** та **Чату**;
- модальних вікон **Створити кімнату / Знайти кімнату**.

> **Приватно та конфіденційно.** Матеріали призначені лише для внутрішнього використання авторизованими учасниками.

---

## 0) Джерела та базові принципи

- **Figma (джерело макетів):** https://www.figma.com/design/dff4bnMz6NAjeUceuhmrPM/Untitled?node-id=653-232&t=qG0TsHGjbwX8aLNb-0  
- **Стиль модалок:** усі вікна авторизації та сервісні діалоги є **модальними overlay**, що з’являються над лобі.  
- **Кольорова гама (авторизація):**  
  - Фони — `#2A201A` (Вхідне / Увійти / Зареєструватися), `#D9D9D9` (Відновлення пароля)  
  - Акцент — `#D9D9D9` (для “темних” модалок), `#5C4646` (для світлої модалки відновлення)

---

## 1) Авторизація — логіка екранів

### 1.1. Головне вхідне вікно (Авторизація)

| Елемент | Логіка |
|---|---|
| **Варіант 1 (Landing Page)** | Містить кнопки "Увійти" та "Зареєструватися" та CTA "Почати". З'являється при першому візиті або після виходу з акаунту. |
| **Варіант 2 (Після Log Out)** | **Не містить** кнопки "Почати". Відображає лише кнопки "Увійти" та "Зареєструватися". З'являється після натискання "Вийти з акаунту". |
| **Кнопка “Увійти”** | відкриває модальне вікно **Увійти** |
| **Кнопка “Зареєструватися”** | відкриває модальне вікно **Зареєструватися** |
| **Закриття (іконка × / “Скасувати”)** | закриває модалку та повертає до лобі (якщо користувач не був повністю логаутнутий). |

### 1.2. Вікно “Увійти”
| Елемент | Вимога |
|---|---|
| **Email / Пароль** | стандартний ввід, валідація формату |
| **“Увійти”** | надсилає дані на сервер |
| **“Забули пароль?”** | замінює поточну модалку на **Відновлення пароля** |
| **“Назад”** | повертає на **Головне вікно** або **Зареєструватися** (за сценарієм) |
| **Вхід через Google** | викликає зовнішній API авторизації |

### 1.3. Вікно “Зареєструватися”
| Елемент | Вимога |
|---|---|
| **Нік / Email / Пароль** | усі обов’язкові |
| **“Повторити пароль”** | має збігатися з “Пароль” |
| **Повторити пошту** | має збігатися з "Пошта" |
| **“Зареєструватися”** | створення облікового запису |
| **“Назад”** | повертає на **Головне вікно** |
| **Чекбокс** | Користувач погоджується з Ліцензією та Політикою безпеки (кнопку див. у файлі button_design). |

### 1.4. Вікно “Відновлення пароля”
| Елемент | Логіка |
|---|---|
| **Email** | адреса для листа з інструкціями |
| **“Надіслати інструкції”** | запит на сервер; після успіху модалка **замінюється** на підтвердження “Інструкції надіслано — перевірте пошту” |
| **“Скасувати” / ×** | закриває та повертає на **Увійти** |

> Відповідні скріншоти розміщуйте **лише** у `design/screenshots_photos/website_design/`.

### 1.5. Вікно “Налаштування гравця” (Player Settings)

| Елемент | Логіка / Вимога |
|---|---|
| **Загальна поведінка** | Модальне вікно, що скролиться (Vertical Scrolling). Висота контенту має бути більшою за висоту Viewport (загальний параметр вікна - 1530 Х 1227). |
| **Кнопка “Зберегти” (Button_Save)** | Primary CTA. Зберігає зміни на сервері та закриває модалку. |
| **Кнопка “Скинути” (Button_Reset)** | Secondary/Danger. Відкидає всі зроблені зміни та повертає поля до значень, які були до відкриття. |
| **Додатково** | повинно бути встановлене обмеження на підвантаження файлів від користувача. |
| **Кнопка “Вийти з акаунту”** | **Danger** (Див. BUTTON.md). При натисканні: 1. Розриває сесію користувача. 2. Перекидає користувача на **Головне вхідне вікно (Варіант 2)**. |

---

### 1.6. Вікно Питання-Відповіді (Game Question Modal)

| Елемент | Логіка / Взаємодія |
|---|---|
| **Загальна поведінка** | Модальне вікно, не скролиться. |
| **Ліва Панель (Questions)** | Область для інтерактивної взаємодії користувача (вибір питань/варіантів). |
| **Права Панель (Answers)** | **Тільки для виводу інформації** (Output). Відображає результат вибору користувача з лівої панелі. Взаємодія з цією частиною відсутня. |

---

### 1.7. Головний Екран (Home)

| Елемент | Логіка / Взаємодія |
|---|---|
| **Загальна поведінка** | Екран скролиться (Vertical Scrolling). Загальний параметр вікна - 1530 Х 1608. |
| **Кнопка “Почати”** | Primary CTA. Перекидає на **Головне вхідне вікно** авторизації. |
| **Кнопка “?” (Button_Question)** | Icon Button. Відкриває **Модальне вікно (Question Modal)**. |
| **Секція "Що нового"** | Екран також виконує функцію скролу, також, при зміні інформаційних вікон - змінюються кружечки, які подані нижче на скриншоті. |
| **Кнопка "як зв'язатися з нами?"** | Використовує на собі функцію лінку

### 1.8. Вікно “Welcome Back”
| Елемент | Логіка / Вимога |
|---|---|
| **Загальна поведінка** | Модальне вікно. З'являється після успішного входу. Фон: [HEX-код, #A88E7F]. |
| **Колір тексту** | [HEX-код тексту, #352727]. |
| **Кнопка “Почати”** | Primary CTA. Переводить користувача на екран **Лобі**. |

### 1.9. Вікно "Конфіденційність"
| Елемент | Логіка / Вимога |
|---|---|
| **Scroll** | Vertical Scrolling: Enabled. |
| **Параметри контенту** | [1530 Х 1821]. |
| **Колір основного фону** | [#34271F]. |
| **Колір фону тексту** | [#BDAC9E]. |
| **Колір тексту** | [#000000]. |
| **Шрифт тексту** | Bona Nova, 30. | 

### 1.10. Вікно "Ліцензія"
| Елемент | Логіка / Вимога |
|---|---|
| **Scroll** | Vertical Scrolling: Enabled. |
| **Параметри контенту** | [1530 Х 1821]. |
| **Колір основного фону** | [#34271F]. |
| **Колір фону тексту** | [#BDAC9E]. |
| **Колір тексту** | [#000000]. |
| **Шрифт тексту** | Bona Nova, 30. | 

### 1.11. Екран завантаження (після вікна Home)
| Елемент | Логіка / Вимога |
|---|---|
| **Колір фону** | [#34271F]. |
| **Колір тексту** | [#FFFFFF]. |
| **Колір фону тексту** | [#402F25]. |
| **Шрифт тексту** | OdorMeanChey, 30. |
| **Додаткова логіка** | Кнопка "продовжити" активується після відсоткового слайдера (див скриншот прикріплений із ним) і стає на місці щойно згаданої кнопки. |

---

### 1.12. Вікно "Профіль гравця"
| Елемент | Логіка / Вимога |
|---|---|
| **Кнопка "Знайти кімнату"** | Відкриває панель на кнопці та спливну загальну панель з правого боку екрану. |
| **Кнопка "Створити кімнату** | Відкриває панель на кнопці, при правильному заповненні відкриває праву панель і одночасно створює лобі. |
| **Кнопка "Олівець" (Edit)** | **При застосуванні активується сектор ніку та біографії гравця** (переходить у стан поточного введення даних користувача). |
| **Кнопка "Зберегти"** | Див. специфікацію у `BUTTON.md`. |
| **Деталі** | 1. У додатку "інформація гри" (див. скриншоти у цій папці) реалізація йде вертикальним скролом, для забезпечення читабельності та зрозумілості користувачу. 2. У секторі "інформація гравця" мають бути дані такі як: матчі, winrate, середня тривалість, топ-3 улюблені карти. |
| **Основний колір (фон вікна)** | `#A88E7F`. |
| **Кольори шаблонів** | `#5C4646`. |
| **Шрифти** | Jim Nightshade, 24 ; Bona Nova, 15. |

### 1.13. Вікно Завантаження (до гри)
| **Фон** | [#34271F]. |
| **Фон тексту** | [#402F25]. |
| **Колір тексту** | [#FFFFFF]. |
| **Шрифт** | OdorMeanChey, 20. |
| **Додатково** | Для перегляду візуального оформлення лоудера - див. теку button_design. |

## 1.14. Повідомлення та Стан Помилки (Error/Warning Messages)

| Елемент | Логіка / Вимога |
|---|---|
| **Позиціонування** | **Спливні повідомлення** (Toast) оформлюються у відступі **20 px від верхньої частини екрану і рівно посередині** (центровано). |
| **Кнопки Помилки** | Кнопки **"Повторити" (Button_Retry)** та **"Надіслати листа підтримки" (Button_Support)** з'являються **ТІЛЬКИ** після спливного повідомлення помилок/попереджень. |
| **Button_Support** | Використовується як **кнопка-посилання** (Link Button), перенаправляючи на форму підтримки або e-mail. |

## 2) Лобі та чат

### 2.1. Кольори (лобі)
| Елемент | Призначення | Hex |
|---|---|---|
| **Основний фон** | фон під усім | `#A88E7F` |
| **Фон модалок (Create/Find Room)** | overlay/вікна | `#5C4646` |
| **Акцент (CTA / активний вибір)** | “Почати”, активні тумблери (2/4/Довільний) | `#7B4E3E` |
| **Фон чату** | область повідомлень | `#BDAC9E` |
| **Ваші повідомлення (праворуч)** | бульбашки користувача | `#7B4E3E` |
| **Текст на світлому** | контент/лейбли | `#3A2F25` |
| **Текст на темному** | кнопки/бульбашки | `#FFFFFF` |

### 2.2. Поле введення та кнопка надсилання
- Поле введення: фон `#E8E4D6`.  
- Кнопка “Надіслати”: той самий `#E8E4D6` з відповідним ховером.

### 2.3. Картки у лобі (профілі/ігрові блоки)
- **Фон картки:** `#FFFFFF`  
- **Текст:** `#3C3333`  
- **Фон допоміжних даних:** `#E8E8E8`

### 2.4. Інтерактивна логіка
- **CTA “Почати/Підтвердити”** — основний колір `#7B4E3E`; для `:hover/:active` — темніший відтінок.  
- **Перемикачі кількості гравців (Create Room)** — активний стан **`#533429`** (чіткий контраст).  
- **Стани кнопок** та специфіка — див. `design/screenshots_photos/button_design/BUTTON.md`.

---

## 3) Респонсивність (Desktop only) та сітка

- 8-px step (внутрішні відступи/гаттери по кратності 8).  
- Макети розраховані **лише на десктопні розширення екрана** (ноутбуки/монітори); окремі мобільні/планшетні версії не передбачені.  
- Реалізація в коді: глобальні CSS-змінні, fluid-типографіка та брейкпойнти в `app/static/css/style.css` (див. `--container-max-width`, `--container-padding`, `--fs-hero` тощо).  
- Цільова зона ширин макетів: ~1280–1920 px; вміст не повинен виходити за межі viewport; не використовувати `transform: scale()` для адаптації.  
- Для всіх основних публічних сторінок застосовуємо єдиний flex-патерн sticky footer (`.page-with-footer`, `.page-main`, `.page-footer` у `style.css`), щоб футер завжди був у нижній частині viewport при невисокому контенті.
- Мін. клікабельна зона — **44×44px**.  
- Не приховувати фокус-кільце: `focus-visible` має бути помітним і контрастним.

---

## 4) A11y / доступність

- Контраст тексту до фону ≥ **4.5:1** (WCAG AA).  
- Для іконкових кнопок без тексту — `aria-label`.  
- Для тумблерів — `aria-pressed="true|false"`, стан має зачитуватись скрінрідером.  
- Не покладатися лише на колір — додавати іконку/лейбл для небезпечних дій.  
- Детальні правила для модалок/toast/кнопок див. у `docs/dev/ABOUT_SCRIPT.md` (role="dialog", focus trap, Esc, live-regions).

---

## 5) Організація файлів

- Скріншоти модалок та лобі зберігати в `design/screenshots_photos/website_design/`.  
- При додаванні бінарних матеріалів (`.png`, `.svg`, `.mp4`, `.ttf`, `.docx` тощо) створюйте **sidecar** `filename.ext.license` зі строкою:  
  `SPDX-License-Identifier: LicenseRef-CityLegends-Proprietary-Assets`.

---

## 6) Зміни / ведення історії
- При зміні кольорів/відступів оновіть цю сторінку і додайте коротку примітку “Що змінилося і чому”.  
- У Merge Request посилайтесь на відповідні розділи цього файлу.

