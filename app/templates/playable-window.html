<!DOCTYPE html>
<!-- SPDX-License-Identifier: LicenseRef-CityLegends-Proprietary-Software -->
<html lang="ua">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Вікно гри — City Legends</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/playable-window.css') }}" />
</head>
<body class="body" data-page="play">
    <div class="div">
        <main class="game-window">
            <!-- Фонова текстура столу -->
            <div class="div2"></div>
            
            <!-- Правий трикутник (скид) -->
            <img class="icon" loading="lazy" alt="" src="{{ url_for('static', filename='img/@2x.png') }}" />
            
            <!-- Центральне ігрове поле -->
            <div class="div3">
                <div class="div4"></div>
                <!-- Центральний слот -->
                <div class="div5"></div>
                <!-- Ліва панель локацій -->
                <div class="div6"></div>
                <!-- Права панель (окуляри) -->
                <img class="icon2" loading="lazy" alt="" src="{{ url_for('static', filename='img/1.svg') }}" />
                <!-- Додаткові слоти -->
                <div class="div7"></div>
                <div class="div8"></div>
            </div>
            
            <!-- Нижня трапеція (карти) -->
            <img class="icon3" alt="" src="{{ url_for('static', filename='img/31.svg') }}" />
            
            <!-- Ліва панель локацій (сітка 2x3) -->
            <div class="div9">
                <div class="div10"></div>
                <div class="div11"></div>
                <div class="div12"></div>
                <div class="div13"></div>
                <div class="div14"></div>
                <div class="div15"></div>
                <div class="div16"></div>
            </div>
            
            <!-- Лівий трикутник (ходи) -->
            <div class="div17">
                <img class="icon4" alt="" src="{{ url_for('static', filename='img/31.svg') }}" />
                <div class="div18"></div>
            </div>
            
            <!-- Права панель (окуляри) -->
            <div class="div19">
                <div class="div20"></div>
                <div class="div21"></div>
                <div class="div22"></div>
            </div>
        </main>
        
        <!-- ВЕРХНЯ ЧАСТИНА -->
        <section class="top-bar">
            <div class="time-display-parent">
                <!-- Ліва група: пісочний годинник та інтеракційна коробка -->
                <div class="time-display">
                    <img class="icon5" alt="" src="{{ url_for('static', filename='img/2.svg') }}" />
                    <div class="interaction-button">
                        <div class="div23"></div>
                    </div>
                </div>
                
                <!-- Кнопки меню та панель гравців -->
                <div class="utilities-bar-wrapper">
                    <div class="utilities-bar">
                        <img class="icon6" loading="lazy" alt="" src="{{ url_for('static', filename='img/3.svg') }}" />
                        <img class="icon7" alt="" src="{{ url_for('static', filename='img/4.svg') }}" />
                        <img class="icon8" alt="" src="{{ url_for('static', filename='img/5.svg') }}" />
                        <img class="icon9" alt="" src="{{ url_for('static', filename='img/6.svg') }}" />
                    </div>
                </div>
                
                <!-- ХП ворога (5 сердець) -->
                <div class="enemy-health">
                    <div class="div24">
                        <div class="div25"></div>
                        <img class="icon10" alt="" src="{{ url_for('static', filename='img/21.svg') }}" />
                        <img class="icon11" alt="" src="{{ url_for('static', filename='img/21.svg') }}" />
                        <img class="icon12" alt="" src="{{ url_for('static', filename='img/21.svg') }}" />
                        <img class="icon13" alt="" src="{{ url_for('static', filename='img/21.svg') }}" />
                        <img class="icon14" alt="" src="{{ url_for('static', filename='img/21.svg') }}" />
                    </div>
                </div>
            </div>
        </section>
        
        <!-- НИЖНЯ ЧАСТИНА -->
        <section class="bottom-bar">
            <div class="card-area">
                <div class="div26">
                    <div class="div27">
                        <div class="div28"></div>
                        <div class="div29"></div>
                    </div>
                </div>
            </div>
            
            <!-- ХП гравця (5 сердець) -->
            <div class="div30">
                <div class="div31"></div>
                <img class="icon15" alt="" src="{{ url_for('static', filename='img/21.svg') }}" />
                <img class="icon16" alt="" src="{{ url_for('static', filename='img/21.svg') }}" />
                <img class="icon17" alt="" src="{{ url_for('static', filename='img/21.svg') }}" />
                <img class="icon18" alt="" src="{{ url_for('static', filename='img/21.svg') }}" />
                <img class="icon19" alt="" src="{{ url_for('static', filename='img/21.svg') }}" />
            </div>
        </section>
    </div>
        
        <div class="modal-overlay" id="modalOverlay_drops" hidden>
            <div
              class="modal_drops"
              role="dialog"
              aria-modal="true"
              aria-labelledby="drops-title"
              tabindex="-1"
            >
                <span class="modal-close" id="closeModal_drops" aria-label="Закрити">&times;</span>
                <div class="popup_name" id="drops-title">Скинуті карти</div>

                <div class="modal_form">
                    <p style="font-family: 'Jura'; font-size: 1.3vw; color: #2b2b2b; text-align: center; margin-top: 5vh;">
                        Тут відображатимуться карти, які ви скинули під час гри.
                    </p>
                </div>
            </div>
        </div>

        <!-- ВСПЛИВНЕ ВІКНО МЕНЮ ГРИ -->
        <div class="modal-overlay" id="modalOverlay_gameMenu" hidden>
            <div
              class="modal_gameMenu"
              role="dialog"
              aria-modal="true"
              aria-labelledby="game-menu-title"
              tabindex="-1"
            >
                <span class="modal-close" id="closeModal_gameMenu" aria-label="Закрити">&times;</span>
                <div class="exit_title" id="game-menu-title">~ Вийти з гри? ~</div>

                <div class="menu_buttons_container">
                    <div class="yes_no_container">
                        <button class="menu_btn polygon_btn">-Так-</button>
                        <button class="menu_btn polygon_btn">-Ні-</button>
                    </div>
                    <button class="menu_btn trapezoid_btn">-Налаштування-</button>
                    <button class="menu_btn hex_btn">--Назад--</button>
                </div>
            </div>
        </div>

        <!-- DEBUG FSM PANEL -->
        <div id="fsm-debug" style="
            position: fixed;
            bottom: 1vw;
            left: 1vw;
            background: rgba(50, 50, 50, 0.8);
            color: white;
            padding: 1vw;
            border-radius: 8px;
            z-index: 999999;
            font-family: monospace;
            font-size: 0.9vw;
        ">
            <div>State: <span id="state-value">idle</span></div>

            <div style="margin-top: .5vw;">Events:</div>
            <button data-event="start">start</button>
            <button data-event="myTurn">myTurn</button>
            <button data-event="theirTurn">theirTurn</button>
            <button data-event="finish">finish</button>

            <div style="margin-top: .5vw;">Log:</div>
            <div id="log" style="
                max-height: 8vw;
                overflow-y: auto;
                background: rgba(0,0,0,.3);
                padding: .5vw;
                border-radius: 4px;
            "></div>
        </div>

        <!-- === FLOATING GAME CHAT === -->
    <div id="gameChatWindow" class="game-chat-window" hidden>
        <div class="game-chat-header">
            <span>Чат</span>

            <!-- ОБОВʼЯЗКОВО ID !!! -->
            <button id="closeGameChat" class="game-chat-close">✖</button>
        </div>

        <div id="gameChatMessages" class="game-chat-messages"></div>

        <div class="game-chat-input-row">
            <input id="gameChatInput" type="text">
            <button id="gameChatSend" class="game-chat-send"></button>
        </div>
    </div>

        <script src="{{ url_for('static', filename='js/play.js') }}"></script>

    </body>
</html>
