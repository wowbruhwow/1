<!DOCTYPE html>
<!-- SPDX-License-Identifier: LicenseRef-CityLegends-Proprietary-Software -->
<html lang="ua">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Вікно гри — City Legends</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
        <link rel="stylesheet" href="{{ url_for('static', filename='css/playable-window.css') }}">
    </head>
    <body class="body" data-page="play">
        <div class="main-container">
            <div class="flex-row">
                <div class="regroup">
                    <div class="hourglass">
                        <span id="timer-seconds">60</span>
                    </div>
                    <div class="interaction-box"></div>
                </div>
                <!-- Encyclopedia button with JS class -->
                <button class="encyclopedia-map CardsFAQ" type="button" aria-label="Енциклопедія"></button>
                <!-- Menu button with JS class -->
                <button class="menu-key GameMenu" type="button" aria-label="Меню гри"></button>
                <!-- Chat button with JS class -->
                <button class="chat-key GameChat" type="button" aria-label="Чат гри"></button>
                <!-- Player icons panel with JS classes -->
                <div class="player-icon-panel Players">
                    <button class="PlayerME" type="button" aria-label="Ваш огляд"></button>
                    <button class="Player_1" type="button" aria-label="Гравець 1"></button>
                    <button class="Player_2" type="button" aria-label="Гравець 2"></button>
                    <button class="Player_3" type="button" aria-label="Гравець 3"></button>
                </div>
                <!-- Enemy HP with JS class -->
                <div class="enemy-hp EnemyHealth">
                    <span class="heart"></span>
                    <span class="heart"></span>
                    <span class="heart"></span>
                    <span class="heart"></span>
                    <span class="heart"></span>
                </div>
                <div class="glasses"></div>
                <div class="special-cards"></div>
                <div class="card-zone"></div>
                <div class="card-back-template"></div>
            </div>
            <div class="flex-row-f">
                <!-- Number of moves with JS classes -->
                <div class="number-of-moves Moves">
                    <p id="MoveCount">5</p>
                </div>
                <!-- Our HP with JS class -->
                <div class="our-hp MyHealth">
                    <span class="heart"></span>
                    <span class="heart"></span>
                    <span class="heart"></span>
                    <span class="heart"></span>
                    <span class="heart"></span>
                </div>
                <!-- Discount/Drops button with JS classes -->
                <div class="discount Drops">
                    <button class="OpenDrops" type="button" aria-label="Скид"></button>
                </div>
            </div>
            <div class="table"></div>
            <div class="card-selection-zone"></div>
        </div>

        <!-- МОДАЛЬНЕ ВІКНО СКИДУ -->
        <div class="modal-overlay" id="modalOverlay_drops" hidden>
            <div
              class="modal_drops"
              role="dialog"
              aria-modal="true"
              aria-labelledby="drops-title"
              tabindex="-1"
            >
                <span class="modal-close" id="closeModal_drops" aria-label="Закрити">&times;</span>
                <div class="popup_name" id="drops-title">Скинуті карти</div>

                <div class="modal_form">
                    <p style="font-family: 'Jura'; font-size: 1.3vw; color: #2b2b2b; text-align: center; margin-top: 5vh;">
                        Тут відображатимуться карти, які ви скинули під час гри.
                    </p>
                </div>
            </div>
        </div>

        <!-- ВСПЛИВНЕ ВІКНО МЕНЮ ГРИ -->
        <div class="modal-overlay" id="modalOverlay_gameMenu" hidden>
            <div
              class="modal_gameMenu"
              role="dialog"
              aria-modal="true"
              aria-labelledby="game-menu-title"
              tabindex="-1"
            >
                <span class="modal-close" id="closeModal_gameMenu" aria-label="Закрити">&times;</span>
                <div class="exit_title" id="game-menu-title">~ Вийти з гри? ~</div>

                <div class="menu_buttons_container">
                    <div class="yes_no_container">
                        <button class="menu_btn polygon_btn">-Так-</button>
                        <button class="menu_btn polygon_btn">-Ні-</button>
                    </div>
                    <button class="menu_btn trapezoid_btn">-Налаштування-</button>
                    <button class="menu_btn hex_btn">--Назад--</button>
                </div>
            </div>
        </div>

        <!-- DEBUG FSM PANEL -->
        <div id="fsm-debug" style="
            position: fixed;
            bottom: 1vw;
            left: 1vw;
            background: rgba(50, 50, 50, 0.8);
            color: white;
            padding: 1vw;
            border-radius: 8px;
            z-index: 999999;
            font-family: monospace;
            font-size: 0.9vw;
        ">
            <div>State: <span id="state-value">idle</span></div>

            <div style="margin-top: .5vw;">Events:</div>
            <button data-event="start">start</button>
            <button data-event="myTurn">myTurn</button>
            <button data-event="theirTurn">theirTurn</button>
            <button data-event="finish">finish</button>

            <div style="margin-top: .5vw;">Log:</div>
            <div id="log" style="
                max-height: 8vw;
                overflow-y: auto;
                background: rgba(0,0,0,.3);
                padding: .5vw;
                border-radius: 4px;
            "></div>
        </div>

        <!-- === FLOATING GAME CHAT === -->
        <div id="gameChatWindow" class="game-chat-window" hidden>
            <div class="game-chat-header">
                <span>Чат</span>
                <button id="closeGameChat" class="game-chat-close">✖</button>
            </div>

            <div id="gameChatMessages" class="game-chat-messages"></div>

            <div class="game-chat-input-row">
                <input id="gameChatInput" type="text">
                <button id="gameChatSend" class="game-chat-send"></button>
            </div>
        </div>

        <script src="{{ url_for('static', filename='js/play.js') }}"></script>
    </body>
</html>
